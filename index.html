<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>AsiaTigerGame Demo</title>
  <style>
    body { font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial; padding: 24px; max-width: 720px; margin: auto; }
    h1 { margin-bottom: 8px; }
    label { display:block; margin:8px 0; }
    input[type="text"], input[type="number"] { padding:8px; width:100%; max-width:320px; box-sizing:border-box; }
    button { padding:10px 16px; margin-top:8px; cursor:pointer; }
    pre { background:#f6f8fa; padding:12px; border-radius:6px; white-space:pre-wrap; word-break:break-word; }
  </style>
</head>
<body>
  <h1>AsiaTigerGame Demo</h1>
  <p><strong>Note</strong> Replace <code>API_BASE</code> with your public tunnel or API URL before publishing.</p>

  <label>Telegram ID
    <input id="tgid" type="text" value="TEST_TGID">
  </label>

  <label>Bet amount
    <input id="bet" type="number" value="100" min="1">
  </label>

  <button id="spin">Spin</button>
  <pre id="out">â€”</pre>

<script>
  // Replace this with your public tunnel URL, e.g. https://asiatigergame.loca.lt
  const API_BASE = 'https://REPLACE_WITH_TUNNEL_URL';

  async function spin() {
    const tgid = document.getElementById('tgid').value.trim();
    const bet = Number(document.getElementById('bet').value) || 0;
    if (!tgid) {
      document.getElementById('out').textContent = 'Please enter a Telegram ID.';
      return;
    }
    try {
      const res = await fetch(API_BASE + '/spin', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'x-demo-key': 'demo_secret'
        },
        body: JSON.stringify({ tgid, game: 'fishing-mini', bet, clientSeed: 'web' })
      });
      if (!res.ok) {
        const text = await res.text();
        document.getElementById('out').textContent = `HTTP ${res.status}\n${text}`;
        return;
      }
      const j = await res.json();
      document.getElementById('out').textContent = JSON.stringify(j, null, 2);
    } catch (err) {
      document.getElementById('out').textContent = 'Network or CORS error: ' + err.message;
    }
  }

  document.getElementById('spin').addEventListener('click', spin);
</script>
</body>
</html>
